<div class="mayor-menor-container">
  <div class="inicio">
    <h1 class="title-app" routerLink="/home" routerLinkActive="active">
      Perfect
      <img class="home-icon" src="assets/icon-clean.png" alt="icono" />Game
    </h1>
  </div>
</div>
<div class="mesa-bg">
  <div class="card text-bg-dark">
    <div class="game-title">
      <h1 class="title-mm">Mayor - Menor</h1>
    </div>
    <div class="puntos" *ngIf="juegoIniciado">
      <p>Puntos: {{ puntos }}</p>
    </div>
    <div class="dorso" *ngIf="!juegoIniciado">
      <div class="carta-dorso-inicio">
        <img [src]="dorsoCarta" alt="Dorso de la carta" />
      </div>
    </div>
    <div class="start-game" *ngIf="!juegoIniciado">
      <button
        class="btn btn-warning"
        (click)="iniciarJuego()"
        [disabled]="cargando || !idMazo"
      >
        {{ cargando ? "Cargando..." : "Start" }}
      </button>
    </div>
    <div class="notificacion" *ngIf="cargando">
      <img src="assets/shuffle.gif" alt="Cargando..." />
    </div>
    <div class="cartas-juego" *ngIf="juegoIniciado && cartaActual">
      <div class="carta-anterior">
        <div class="columna-anterior">
          <img
            *ngIf="cartaAnterior"
            [src]="cartaAnterior.image"
            alt="Carta anterior"
          />
          <p>Carta anterior</p>
        </div>
      </div>
      <div class="carta-actual">
        <div class="columna-actual">
          <img [src]="cartaActual.image" alt="Carta actual" />
          <p>{{ cartaActual.value }} of {{ cartaActual.suit }}</p>
        </div>
      </div>
    </div>
    <div
      class="ingame-btn"
      *ngIf="juegoIniciado && cartaActual && cartasRestantes > 0"
    >
      <div class="btn-opciones">
        <button
          class="btn btn-secondary"
          (click)="eleccionJugador('alto')"
          [disabled]="cargando || botonesDeshabilitados"
        >
          Mayor
        </button>
        <button
          class="btn btn-secondary igual"
          (click)="eleccionJugador('igual')"
          [disabled]="cargando || botonesDeshabilitados"
        >
          Igual
        </button>
        <button
          class="btn btn-secondary"
          (click)="eleccionJugador('bajo')"
          [disabled]="cargando || botonesDeshabilitados"
        >
          Menor
        </button>
      </div>
      <p class="msg">{{ mensajeResultado }}</p>
    </div>
    <div *ngIf="juegoIniciado && cartasRestantes === 0">
      <p class="final-msg">¡El juego ha terminado, no quedan más cartas!</p>
      <div class="game-over">
        <button class="btn btn-warning" (click)="volverAlMenu()">
          Volver al menú
        </button>
      </div>
    </div>
  </div>
</div>
<div
  class="ranking"
  *ngIf="rankingData && rankingData.length > 0; else noDataTemplate"
>
  <h3>Ranking del Juego Mayor-Menor</h3>
  <div class="ranking-container">
    <table class="ranking-table">
      <thead class="header-tabla">
        <tr>
          <th>Usuario</th>
          <th>Puntos</th>
        </tr>
      </thead>
      <tbody class="body-tabla">
        <tr *ngFor="let item of rankingData">
          <td>{{ item.usuario }}</td>
          <td>{{ item.puntos }}</td>
        </tr>
      </tbody>
    </table>
  </div>
  <!-- <ul>
    <li *ngFor="let item of rankingData">
      Usuario: {{ item.usuario }} - Puntos: {{ item.puntos }}
    </li>
  </ul> -->
</div>
<ng-template #noDataTemplate>
  <p>No hay datos de ranking disponibles.</p>
</ng-template>
<div class="como-jugar">
  <div class="card card-como-jugar">
    <div class="card-header">Como Jugar</div>
    <div class="card-info">
      <p class="exp-general">
        Se le muestra al jugador una carta, y su objetivo es adivinar si la
        siguiente carta será mayor o menor en valor.
      </p>
      <p class="info-pto">1- Se saca una carta al azar de la baraja.</p>
      <p class="info-pto">
        2- El jugador elige si la siguiente carta será de valor mayor o menor.
      </p>
      <p class="info-pto">3- Se revela la nueva carta.</p>
      <p class="letra-pto">a. Si el jugador adivinó correctamente, gana.</p>
      <p class="letra-pto">b. Si se equivoca, pierde.</p>
      <p class="exp-general">
        El juego continúa hasta que se acaban las cartas del mazo.
      </p>
    </div>
  </div>
</div>
